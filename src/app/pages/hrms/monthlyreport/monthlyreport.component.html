<div class="card">
    <div class="p-grid p-align-center p-justify-between mb-3">
        <div class="p-col-4">
            <input type="text" pInputText placeholder="Search by Attendance Type..." [(ngModel)]="searchText" (input)="onSearch()" style="width: 100%" />
        </div>
    </div>

    <p-table [value]="attendanceList" [paginator]="true" [rows]="limit" [totalRecords]="total" [lazy]="true" (onLazyLoad)="loadAttendance($event)" [loading]="loading" [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template pTemplate="header">
            <tr>
                <th>Employee ID</th>
                <th>UserName</th>
                <th>Attendance Type</th>
                <th>Date</th>
                <th>Remarks</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-attendance>
            <tr>
                <td>{{ attendance.userId.empId || '' }}</td>
                <td>{{ attendance.userId?.user_name }}</td>
                <td>{{ attendance.attendanceType }}</td>
                <td>{{ attendance.date | date: 'yyyy-MM-dd' }}</td>
                <td>{{ attendance.remarks || '-' }}</td>
            </tr>
        </ng-template>
    </p-table>
</div>

<!-- Approval Popup Dialog -->
<p-dialog header="Approve Attendance" [(visible)]="approvalDialog" [modal]="true" [style]="{ width: '400px' }" [closable]="true">
    <p>Do you want to approve or reject this attendance entry?</p>

    <div class="p-d-flex p-jc-end mt-4">
        <button pButton label="Approve" class="p-button-success mr-2" (click)="approveAttendance()"></button>
        <button pButton label="Reject" class="p-button-danger" (click)="rejectAttendance()"></button>
    </div>
</p-dialog>
