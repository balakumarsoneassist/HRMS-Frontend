<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="p-fluid formgrid grid">
  <!-- Username -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="user_name" type="text" pInputText formControlName="user_name"  />
      <label for="user_name">User Name</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('user_name')?.hasError('required') && userForm.get('user_name')?.touched" class="p-error">Username is required</small>
    <small *ngIf="userForm.get('user_name')?.hasError('pattern') && userForm.get('user_name')?.touched" class="p-error">Only alphabets are allowed</small>
  </div>

  <!-- Mobile No -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="mobile_no" type="text" pInputText formControlName="mobile_no" />
      <label for="mobile_no">Mobile No</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('mobile_no')?.hasError('required') && userForm.get('mobile_no')?.touched" class="p-error">Mobile number is required</small>
    <small *ngIf="userForm.get('mobile_no')?.hasError('pattern') && userForm.get('mobile_no')?.touched" class="p-error">Enter a valid 10-digit number</small>
  </div>

  <!-- Email -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="email" type="email" pInputText formControlName="email" />
      <label for="email">Email</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('email')?.hasError('required') && userForm.get('email')?.touched" class="p-error">Email is required</small>
    <small *ngIf="userForm.get('email')?.hasError('email') && userForm.get('email')?.touched" class="p-error">Enter a valid email</small>
  </div>

  <!-- Password -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="password" type="password" pInputText formControlName="password" />
      <label for="password">Password</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('password')?.hasError('required') && userForm.get('password')?.touched" class="p-error">Password is required</small>
  </div>

  <!-- Position -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="position" type="text" pInputText formControlName="position"  />
      <label for="position">Position</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('position')?.hasError('required') && userForm.get('position')?.touched" class="p-error">Position is required</small>
    <small *ngIf="userForm.get('position')?.hasError('pattern') && userForm.get('position')?.touched" class="p-error">Only alphabets are allowed</small>
  </div>

  <!-- Role Dropdown -->
  <div class="field col-12 md:col-4 mb-4">
    <!-- <p-floatLabel variant="on"> -->
      <label for="role">Role</label>
      <p-dropdown
        inputId="role"
        [options]="roles"
        optionLabel="role"
        optionValue="_id"
        formControlName="role">
      </p-dropdown>
    <!-- </p-floatLabel> -->
    <small *ngIf="userForm.get('role')?.hasError('required') && userForm.get('role')?.touched" class="p-error">Role is required</small>
  </div>

  <!-- Designation (only when role === 'Admin') -->
  <div class="field col-12 md:col-4 mb-4" *ngIf="userForm.value.role === 'Admin' || selectedRoleName === 'Admin'">
    <p-floatLabel variant="on">
      <input id="designation" type="text" pInputText formControlName="designation"  />
      <label for="designation">Designation (for Admin)</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('designation')?.hasError('required') && userForm.get('designation')?.touched" class="p-error">Designation is required for Admin</small>
    <small *ngIf="userForm.get('designation')?.hasError('pattern') && userForm.get('designation')?.touched" class="p-error">Only alphabets are allowed</small>
  </div>

  <!-- Department -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <input id="department" type="text" pInputText formControlName="department"  />
      <label for="department">Department</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('department')?.hasError('pattern') && userForm.get('department')?.touched" class="p-error">Only alphabets are allowed</small>
  </div>

  <!-- Policy Name (AFTER Department) -->
  <div class="field col-12 md:col-4 mb-4">
    <!-- <p-floatLabel variant="on"> -->
         <label for="policyName">Policy Name: </label>
      <p-dropdown
        inputId="policyName"
        [options]="leavePolicies"
        formControlName="policyName"
        [showClear]="true"
        placeholder="Select policy">
      </p-dropdown>

    <!-- </p-floatLabel> -->
    <small *ngIf="userForm.get('policyName')?.hasError('required') && userForm.get('policyName')?.touched" class="p-error">
      Policy is required
    </small>
  </div>

  <!-- DOJ -->
  <div class="field col-12 md:col-4 mb-4">
    <p-floatLabel variant="on">
      <p-calendar id="doj" formControlName="doj" dateFormat="dd/mm/yy" [showIcon]="true"></p-calendar>
      <label for="doj">Date of Joining</label>
    </p-floatLabel>
    <small *ngIf="userForm.get('doj')?.hasError('required') && userForm.get('doj')?.touched" class="p-error">Date of joining is required</small>
  </div>

  <!-- Submit -->
  <div class="field col-12 mt-4">
    <button pButton type="submit" label="Submit" [disabled]="userForm.invalid" class="w-full"></button>
  </div>
</form>
