<p-toast></p-toast>

<div class="card p-4">
  <h2 class="mb-4 text-2xl font-bold">Connector Contact List</h2>

  <!-- Global Search -->
  <div class="mb-3">
    <span class="p-input-icon-left">
      <i class="pi pi-search"></i>
      <input
        pInputText
        placeholder="Global Search"
        [(ngModel)]="globalFilterValue"
        (keyup.enter)="table.reset()"
        class="p-input-sm"
      />
    </span>
  </div>

  <p-table
    #dt
    [value]="connectorList"
    [lazy]="true"
    (onLazyLoad)="loadConnectorContacts($event)"
    [paginator]="true"
    [rows]="10"
    [totalRecords]="totalRecords"
    [loading]="loading"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Mobile Number</th>
        <th>Email Id</th>
        <th>Location</th>
        <th style="width: 120px">Action</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-c>
      <tr>
        <td>{{ c.FirstName }}</td>
        <td>{{ c.MobileNumber }}</td>
        <td>{{ c.EmailId }}</td>
        <td>
          <p-dropdown
            [options]="locationOptions"
            [(ngModel)]="c.LocationId"
            placeholder="Select"
            [style]="{ width: '100%' }"
            (onChange)="onLocationChange(c.Id, c.LocationId)"
          ></p-dropdown>
        </td>
        <td class="text-center">
          <p-button
            label="Update"
            icon="pi pi-refresh"
            class="p-button-primary"
            [style]="{ height: '36px', borderRadius: '0' }"
            (onClick)="onLocationChange(c.Id, c.LocationId)"
          ></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
