<p-toast></p-toast>

<div class="container">
  <div class="flex flex-column gap-3 p-3">
    <div class="bg-color-ContHead flex justify-content-between align-items-center py-2 px-3 font-w-600 border-b rounded">
      <div class="text-xl">Contact Status Emp Report - {{ FollowerName }} - {{ StatusType }}</div>
    </div>

    <div class="bg-color-ContBody1 p-3 rounded">
      <div class="flex align-items-center gap-3 mb-3">
        <p-floatLabel class="w-full sm:w-20rem">
          <input
            pInputText
            id="search"
            type="text"
            [(ngModel)]="searchStr"
            class="w-full"
          />
          <label for="search">Search</label>
        </p-floatLabel>
      </div>

      <p-table
        [value]="StatusList | searchpipe : searchStr"
        responsiveLayout="scroll"
        class="font-w-600"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Mobile Number</th>
            <th>Track No</th>
            <th>Modified On</th>
            <th>View</th>
            <th>Track</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
          <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.firstname }}</td>
            <td>{{ row.mobilenumber }}</td>
            <td>{{ row.tracknumber }}</td>
            <td>{{ row.modifiedon }}</td>
            <td>
              <button
                pButton
                size="small"
                icon="pi pi-eye"
                label="View"
                (click)="openView(row.tracknumber)"
              ></button>
            </td>
            <td>
              <button
                pButton
                size="small"
                icon="pi pi-search"
                label="Track"
                (click)="openTrack(row.tracknumber, row.id)"
              ></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

<!-- View Dialog -->
<p-dialog
  header="Call History"
  [(visible)]="showViewDialog"
  [modal]="true"
  [style]="{width: '60vw'}"
  [dismissableMask]="true"
>
  <app-call-track-history></app-call-track-history>
</p-dialog>

<!-- Track Dialog -->
<p-dialog
  header="Lead Details"
  [(visible)]="showTrackDialog"
  [modal]="true"
  [style]="{width: '60vw'}"
  [dismissableMask]="true"
>
  <app-lead-form-model></app-lead-form-model>
</p-dialog>
