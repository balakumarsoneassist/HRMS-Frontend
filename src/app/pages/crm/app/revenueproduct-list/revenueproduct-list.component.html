<p-toast></p-toast>

<div class="card">
  <h2 class="mb-3">Revenue Product Master</h2>

  <form>
    <div class="flex flex-row flex-wrap align-items-end gap-4">

      <div class="flex flex-column" style="min-width: 200px;">
        <p-dropdown
          [options]="productOptions"
          [(ngModel)]="model.product"
          name="product"
          placeholder="Select Product"
          class="w-full"
        ></p-dropdown>
      </div>

      <div class="flex flex-column" style="min-width: 200px;">
        <p-dropdown
          [options]="categoryOptions"
          [(ngModel)]="model.category"
          name="category"
          placeholder="Select Category"
          class="w-full"
        ></p-dropdown>
      </div>

      <div class="flex flex-column" style="min-width: 200px;">
        <input
          pInputText
          type="text"
          [(ngModel)]="model.percentage"
          name="percentage"
          placeholder="Enter %"
          class="w-full"
        />
      </div>

      <div style="min-width: 150px;" class="pt-4">
        <button
          pButton
          type="button"
          label="Submit"
          icon="pi pi-check"
          class="w-full"
          (click)="saveProduct()"
        ></button>
      </div>

    </div>
  </form>
</div>

<!-- Table Section -->
<div class="card mt-5">
  <p-table [value]="ProductList" responsiveLayout="scroll" class="p-datatable-gridlines">

    <ng-template pTemplate="header">
      <tr>
        <th class="text-center">Product</th>
        <th class="text-center">Category</th>
        <th class="text-center">Percentage</th>
        <th class="text-center">Name</th>
        <th class="text-center">Action</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-rowData>
      <tr>
        <td class="text-center">{{ rowData.Product }}</td>
        <td class="text-center">{{ rowData.Category }}</td>
        <td class="text-center">{{ rowData.Percentage }}</td>
        <td class="text-center">{{ rowData.RPname }}</td>
        <td class="text-center">
          <button
            pButton
            icon="pi pi-pencil"
            label="Edit"
            class="p-button-sm p-button-warning"
            (click)="editProduct(rowData.Id, rowData.Category, rowData.Product, rowData.Percentage, rowData.RPname)"
          ></button>
        </td>
      </tr>
    </ng-template>

  </p-table>
</div>
