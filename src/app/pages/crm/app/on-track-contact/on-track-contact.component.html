
    <p-toast></p-toast>

    <div *ngIf="loaderService.showLoader && loadSpin > 0" class="flex justify-content-center mt-4">
      <p-progressSpinner strokeWidth="4"></p-progressSpinner>
    </div>

    <div class="mb-3 flex justify-content-end">
      <input
        type="text"
        pInputText
        placeholder="Search all..."
        [(ngModel)]="globalFilter"
        (input)="table.filterGlobal($event.target?.['value'], 'contains')"
        class="w-full sm:w-25rem"
      />
    </div>

    <p-table
      #table
      [value]="ContactOnTrackList"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5, 10, 20]"
      [totalRecords]="TotalRecordNo"
      [lazy]="true"
      (onLazyLoad)="onLazyLoad($event)"
      [loading]="loadSpin === 1"
      [globalFilterFields]="['TrackNumber', 'Name', 'MobileNumber', 'Location', 'Status']"
      [resizableColumns]="true"
      [scrollable]="true"
      scrollHeight="500px"
      [responsiveLayout]="'scroll'"
      sortMode="multiple"
    >
     <!-- <ng-template #caption>
            <div class="flex">
                    <input pInputText type="text" (input)="table.filterGlobal($event.target?.['value'], 'contains')"  (keypress)="logKey($event)" placeholder="Search keyword" />

            </div>
        </ng-template> -->
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="TrackNumber">Track Number <p-sortIcon field="TrackNumber" /></th>
          <th pSortableColumn="Name">Name <p-sortIcon field="Name" /></th>
          <th pSortableColumn="MobileNumber">Mobile Number <p-sortIcon field="MobileNumber" /></th>
          <th pSortableColumn="AppointmentDate">Appointment Date <p-sortIcon field="AppointmentDate" /></th>
          <th pSortableColumn="Location">Location <p-sortIcon field="Location" /></th>
          <th pSortableColumn="Status">Status <p-sortIcon field="Status" /></th>
          <th>Action</th>
        </tr>
        <tr>
          <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'TrackNumber', 'contains')" /></th>
          <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'Name', 'contains')" /></th>
          <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'MobileNumber', 'contains')" /></th>
          <th></th>
          <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'Location', 'contains')" /></th>
          <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'Status', 'contains')" /></th>
          <th></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr>
          <td>{{ row.TrackNumber }}</td>
          <td>{{ row.Name }}</td>
          <td>{{ row.MobileNumber }}</td>
          <td>{{ row.AppointmentDate | date: 'dd/MM/yyyy HH:mm' }}</td>
          <td>{{ row.Location }}</td>
          <td>
            <span class="py-2 px-3 bg-color-yellow rounded color-white">{{ row.Status | lowercase }}</span>
          </td>
          <td class="text-center">
            <p-button
              label="Update"
              icon="pi pi-pencil"
              size="small"
              class="p-button-sm"
              (onClick)="callStatus(row.Id, row.TrackNumber)"
              *ngIf="row.Status !== 'reject'"
            ></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
<p-dialog
  [(visible)]="showLeadFormModel"
  [modal]="true"
  [closable]="true"
  [dismissableMask]="true"
  [style]="{ width: '50vw' }"
  header="Track Lead"
  (onHide)="closeLeadFormModel()"
>
  <ng-container *ngIf="showLeadFormModel">
    <app-lead-form-model
    ></app-lead-form-model>
  </ng-container>
</p-dialog>
