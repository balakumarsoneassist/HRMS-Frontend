<p-toast></p-toast>

<div *ngIf="loaderService.showLoader && loadSpin > 0" class="flex justify-content-center mt-4">
  <p-progressSpinner strokeWidth="4"></p-progressSpinner>
</div>

<div class="mb-3 flex justify-content-end">
  <input
    type="text"
    pInputText
    placeholder="Search all..."
    [(ngModel)]="globalFilter"
    (input)="table.filterGlobal($event.target?.['value'], 'contains')"
    class="w-full sm:w-25rem"
  />
</div>

<p-table
  #table
  [value]="ContactUnTrackList"
  [paginator]="true"
  [rows]="10"
  [totalRecords]="TotalRecordNo"
  [rowsPerPageOptions]="[5, 10, 20]"
  [resizableColumns]="true"
  [scrollable]="true"
  scrollHeight="500px"
  [responsiveLayout]="'scroll'"
  [lazy]="true"
  (onLazyLoad)="onLazyLoad($event)"
  [loading]="loadSpin === 1"
  [globalFilterFields]="['TrackNumber', 'Name', 'MobileNumber', 'EmailId', 'Location']"
>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="TrackNumber">Track Number <p-sortIcon field="TrackNumber" /></th>
      <th pSortableColumn="Name">Name <p-sortIcon field="Name" /></th>
      <th pSortableColumn="MobileNumber">Mobile Number <p-sortIcon field="MobileNumber" /></th>
      <th pSortableColumn="EmailId">Email Id <p-sortIcon field="EmailId" /></th>
      <th pSortableColumn="Location">Location <p-sortIcon field="Location" /></th>
      <th>Action</th>
    </tr>
    <tr>
      <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'TrackNumber', 'contains')" /></th>
      <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'Name', 'contains')" /></th>
      <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'MobileNumber', 'contains')" /></th>
      <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'EmailId', 'contains')" /></th>
      <th><input pInputText type="text" (input)="table.filter($event.target?.['value'], 'Location', 'contains')" /></th>
      <th></th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-row>
    <tr>
      <td>{{ row.TrackNumber }}</td>
      <td>{{ row.Name }}</td>
      <td>{{ row.MobileNumber }}</td>
      <td>{{ row.EmailId }}</td>
      <td>{{ row.Location }}</td>
      <td class="text-center">
        <p-button
          label="Track"
          icon="pi pi-arrow-right"
          size="small"
          class="p-button-sm"
          (onClick)="callStatus(row.Id, row.TrackNumber)"
        ></p-button>
      </td>
    </tr>
  </ng-template>
</p-table>

<div class="paginationContainer d-flex justify-content-between flex-wrap mt-4 mb-2 font-w-600">
  <div class="align-self-center font-size-14 mb-3 mb-sm-0 text-center">
    Showing {{ StartNo }} to {{ EndNo }} of {{ TotalRecordNo }} Records
  </div>
  <div class="paginationBtnContainer text-center">
    <button
      class="border-header mr-2 bg-color-input color-initial rounded"
      [disabled]="!IsbtnPreviousEnable"
      (click)="GoToPreviousPage()"
    >
      <i class="pi pi-chevron-left"></i>
    </button>
    <span class="mr-2 color-initial font-w-600 font-size-14">{{ ManualPageInput }} of {{ TotalNumberOfPages }} pages</span>
    <button
      class="border-header bg-color-input color-initial rounded"
      [disabled]="!IsbtnNextEnable"
      (click)="GoToNextPage()"
    >
      <i class="pi pi-chevron-right"></i>
    </button>
  </div>
</div>
<p-dialog
  [(visible)]="showLeadFormModel"
  [modal]="true"
  [closable]="true"
  [dismissableMask]="true"
  [style]="{ width: '50vw' }"
  header="Track Lead"
  (onHide)="closeLeadFormModel()"
>
<ng-container *ngIf="showLeadFormModel">
    <app-lead-form-model
    ></app-lead-form-model>
  </ng-container>
</p-dialog>
